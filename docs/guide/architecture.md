# Архитектура приложения

## Обзор

Приложение построено на основе клиент-серверной архитектуры:

- **Клиент**: Одностраничное приложение (SPA) на Vue.js
- **Сервер**: REST API на Node.js с Express
- **База данных**: PostgreSQL

## Схема компонентов
┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ \
│ │ │ │ │ │ │ Vue Frontend │◄───►│ REST API │◄───►│ PostgreSQL │ │ │ │ │ │ │ │
└─────────────────┘ └─────────────────┘ └─────────────────┘

## Клиентская часть

Клиентская часть построена с использованием компонентного подхода Vue.js:

### Основная структура директорий:

- **src/components/** - визуальные компоненты
    - **employees/** - компоненты для работы с сотрудниками
    - **departments/** - компоненты для работы с отделами
    - **organizations/** - компоненты для работы с организациями
    - **UI/** - переиспользуемые UI-компоненты
- **src/store/** - хранилище данных на Pinia
- **src/http/** - API-клиенты для взаимодействия с сервером
- **src/utils/** - утилитарные функции
- **src/router/** - конфигурация маршрутизации
- **src/assets/** - статические ресурсы (изображения, стили)

### Ключевые компоненты:

- **App.vue** - корневой компонент приложения
- **styles/base.scss** - общие стили в приложении
- **main.js** - точка входа приложения
- **pages/** - страницы приложения
    - **EmployeesPage.vue** - страница сотрудников
    - **DepartmentsPage.vue** - страница отделов
    - **OrganizationsPage.vue** - страница организаций
    - **PositionsPage.vue** - страница должностей
    - **UserPage.vue** - страница пользователя

## Серверная часть

### Основная структура директорий:

- **src/controllers/** - обработчики HTTP-запросов
    - **departmentController.js** - контроллер для работы с отделами
    - **employeeController.js** - контроллер для работы с сотрудниками
    - **hr_operationController.js** - контроллер для работы с кадровыми операциями
    - **organizationController.js** - контроллер для работы с организациями
    - **positionController.js** - контроллер для работы с должностями
    - **userController.js** - контроллер для работы с пользователями
- **src/models/** - модели данных (Sequelize)
    - **address.js** - модель адреса сотрудника
    - **department.js** - модель отдела организации
    - **employee.js** - модель сотрудника
    - **file.js** - модель файла сотрудника
    - **history.js** - модель истории изменений
    - **hr_operation.js** - модель кадровой операции
    - **passport.js** - модель паспорта сотрудника
    - **position.js** - модель должности
    - **user.js**
- **src/routes/** - маршруты API
    - **departmentRouter.js** - маршруты для работы с отделами
    - **employeeRouter.js** - маршруты для работы с сотрудниками
    - **hr_operationrouter.js** - маршруты для работы с кадровыми операциями
    - **index.js** - главный файл маршрутизации
    - **organizationRouter.js** - маршруты для работы с организациями
    - **positionRouter.js** - маршруты для работы с должностями
    - **userRouter.js** - маршруты для работы с пользователями
- **src/middleware/** - промежуточные обработчики
    - **authMiddleware.js** - обработка аутентификации
    - **errorHandlingMiddleware.js** - обработка ошибок
    - **checkRoleMiddleware.js** - обработка ролей пользователей
    - **validationMiddleware.js** - валидация входящих данных

### REST API:

Сервер предоставляет RESTful API с основными эндпоинтами:
- `/api/employees` - управление сотрудниками
- `/api/departments` - управление отделами
- `/api/organizations` - управление организациями
- `/api/position` - работа с должностями
- `/api/user` - аутентификация и авторизация

## Взаимодействие компонентов

1. Клиент отправляет запрос на сервер через HTTP-клиент
2. Сервер обрабатывает запрос в соответствующем контроллере
3. Контроллер обрабатывает запрос и вызывает соответствующий сервис
4. Сервисы взаимодействуют с моделями для работы с базой данных
5. Результат возвращается клиенту в формате JSON
6. Клиент обрабатывает ответ и обновляет состояние приложения

